<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>STANDOFF GOLD TAP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>

<style>
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{margin:0;padding:0;background:#000;color:#fff;font-family:-apple-system,BlinkMacSystemFont,Arial,sans-serif}

/* ===== SAFE HEIGHT ===== */
.app{
  height:100dvh;
  display:grid;
  grid-template-rows:auto 1fr auto;
}
@supports not (height:100dvh){
  .app{height:100vh}
}

/* ===== TOP ===== */
.top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 16px 6px;
}
.title{
  font-size:13px;
  font-weight:700;
  opacity:.85;
}
.balance-wrap{
  text-align:center;
  flex:1;
}
.balance{
  font-size:34px;
  font-weight:900;
}
.unit{
  font-size:12px;
  opacity:.6;
}

/* ===== CENTER ===== */
.center{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:18px;
  position:relative;
}

/* ===== ORB ===== */
.orb-wrap{
  position:relative;
  width:240px;
  height:240px;
}

/* GLOW (–ù–ï –ü–ï–†–ï–•–í–ê–¢–´–í–ê–ï–¢ –¢–ê–ü) */
.glow-back,
.glow-front{
  position:absolute;
  inset:-80px;
  pointer-events:none;
}
.glow-back{
  background:radial-gradient(circle,rgba(255,170,0,.35),transparent 65%);
  filter:blur(45px);
  animation:breath 3.5s ease-in-out infinite;
}
.glow-front{
  inset:-40px;
  background:radial-gradient(circle,rgba(255,200,80,.6),transparent 60%);
  filter:blur(22px);
  animation:breath 3.5s ease-in-out infinite;
}

@keyframes breath{
  0%{opacity:.6}
  50%{opacity:1}
  100%{opacity:.6}
}

.orb{
  width:240px;
  height:240px;
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%,#ffe29a,#ffb300 60%,#ff9800);
  box-shadow:
    inset 0 0 20px rgba(255,255,255,.25),
    inset 0 -20px 30px rgba(0,0,0,.25),
    0 0 70px rgba(255,170,0,.9);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:32px;
  font-weight:900;
  color:#2b1c00;
  cursor:pointer;
  user-select:none;
  position:relative;
  z-index:2;
}
.orb:active{transform:scale(.96)}

/* ===== ENERGY ===== */
.energy{
  width:82%;
}
.energy-bar{
  height:7px;
  background:#222;
  border-radius:6px;
  overflow:hidden;
}
.energy-fill{
  height:100%;
  background:linear-gradient(90deg,#ffd36a,#ff9f00);
  transition:width .25s linear;
}

/* ===== FLOAT ===== */
.float{
  position:absolute;
  color:#ffd36a;
  font-weight:800;
  animation:floatUp .8s ease forwards;
  pointer-events:none;
}
@keyframes floatUp{
  from{transform:translateY(0);opacity:1}
  to{transform:translateY(-50px);opacity:0}
}

/* ===== MENU ===== */
.menu{
  display:flex;
  border-top:1px solid #222;
  padding-bottom:env(safe-area-inset-bottom);
}
.menu button{
  flex:1;
  background:none;
  border:none;
  color:#777;
  padding:10px 0;
  font-size:11px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:4px;
}
.menu svg{width:22px;height:22px;fill:currentColor}
.menu .active{color:#ffb300;font-weight:700}

/* ===== SCREENS ===== */
.screen{display:none}
.screen.active{display:block}

/* ===== BOOSTS / WITHDRAW ===== */
.panel{
  padding:24px;
  text-align:center;
}
.card{
  background:rgba(255,255,255,.05);
  border-radius:14px;
  padding:14px;
  margin-top:12px;
}
.btn{
  width:100%;
  height:44px;
  border-radius:12px;
  border:none;
  background:#ffb300;
  color:#2b1c00;
  font-weight:900;
  margin-top:12px;
}
.small{font-size:12px;opacity:.7}
</style>
</head>

<body>

<div class="app">

  <!-- ===== EARN ===== -->
  <div class="screen active" id="earn">
    <div class="top">
      <div class="title">STANDOFF GOLD TAP</div>
      <div class="balance-wrap">
        <div class="balance" id="balance">0</div>
        <div class="unit">GOLD</div>
      </div>
      <div style="width:60px"></div>
    </div>

    <div class="center" id="zone">
      <div class="orb-wrap">
        <div class="glow-back"></div>
        <div class="glow-front"></div>
        <div class="orb" id="orb">GOLD</div>
      </div>

      <div class="energy">
        <div class="energy-bar">
          <div class="energy-fill" id="energyFill"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== BOOSTS ===== -->
  <div class="screen" id="boosts">
    <div class="panel">
      <h2>Boosts</h2>

      <div class="card">
        <b>‚ö° BOOST x2</b>
        <div class="small" id="b2xStatus"></div>
        <button class="btn" onclick="boost2x()">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>

      <div class="card">
        <b>ü§ñ AUTO TAP</b>
        <div class="small" id="autoStatus"></div>
        <button class="btn" onclick="autoTap()">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- ===== WITHDRAW ===== -->
  <div class="screen" id="withdraw">
    <div class="panel">
      <h2>–í—ã–≤–æ–¥</h2>
      <div class="small">100 TAPS = 10 GOLD</div>
    </div>
  </div>

  <!-- ===== MENU ===== -->
  <div class="menu">
    <button class="active" onclick="show('earn',this)">
      <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/></svg>Earn
    </button>
    <button onclick="show('boosts',this)">
      <svg viewBox="0 0 24 24"><polygon points="12,2 15,11 22,12 15,13 12,22 9,13 2,12 9,11"/></svg>Boosts
    </button>
    <button onclick="show('withdraw',this)">
      <svg viewBox="0 0 24 24"><path d="M12 2v14m0 0l-5-5m5 5l5-5"/></svg>–í—ã–≤–æ–¥
    </button>
  </div>

</div>

<script>
/* ===== CONFIG ===== */
const MAX=5500;
const B2X_TIME=30, B2X_CD=120;
const AUTO_TIME=60, AUTO_CD=300;

/* ===== STATE ===== */
let gold=+localStorage.getItem('gold')||0;
let energy=+localStorage.getItem('energy')||MAX;
let b2xUntil=+localStorage.getItem('b2xUntil')||0;
let b2xCd=+localStorage.getItem('b2xCd')||0;
let autoUntil=+localStorage.getItem('autoUntil')||0;
let autoCd=+localStorage.getItem('autoCd')||0;

/* ===== DOM ===== */
const balance=document.getElementById('balance');
const energyFill=document.getElementById('energyFill');
const orb=document.getElementById('orb');
const zone=document.getElementById('zone');

function now(){return Math.floor(Date.now()/1000)}
function isB2x(){return now()<b2xUntil}
function isAuto(){return now()<autoUntil}

function render(){
  balance.textContent=gold.toLocaleString();
  energyFill.style.width=(energy/MAX*100)+'%';
  document.getElementById('b2xStatus').textContent =
    isB2x()?`–ê–∫—Ç–∏–≤–µ–Ω ${b2xUntil-now()}—Å`:now()<b2xCd?`–ö–î ${b2xCd-now()}—Å`:'–î–æ—Å—Ç—É–ø–µ–Ω';
  document.getElementById('autoStatus').textContent =
    isAuto()?`–ê–∫—Ç–∏–≤–µ–Ω ${autoUntil-now()}—Å`:now()<autoCd?`–ö–î ${autoCd-now()}—Å`:'–î–æ—Å—Ç—É–ø–µ–Ω';
}
render();

/* ===== HAPTIC ===== */
function haptic(){
  if(window.Telegram?.WebApp?.HapticFeedback){
    Telegram.WebApp.HapticFeedback.impactOccurred('light');
  }
}

/* ===== TAP ===== */
orb.addEventListener('click',e=>{
  if(energy<=0) return;
  energy--;
  gold+=isB2x()?2:1;
  localStorage.setItem('gold',gold);
  localStorage.setItem('energy',energy);
  render();
  haptic();

  const f=document.createElement('div');
  f.className='float';
  f.textContent='+'+(isB2x()?2:1);
  f.style.left=e.offsetX+'px';
  f.style.top=e.offsetY+'px';
  zone.appendChild(f);
  setTimeout(()=>f.remove(),800);
});

/* ===== ENERGY REGEN ===== */
setInterval(()=>{
  energy=Math.min(MAX,energy+1);
  localStorage.setItem('energy',energy);
  render();
},1000);

/* ===== AUTO TAP ===== */
setInterval(()=>{
  if(isAuto()&&energy>0){
    energy--;
    gold+=isB2x()?2:1;
    localStorage.setItem('gold',gold);
    localStorage.setItem('energy',energy);
    render();
  }
},2000);

/* ===== BOOSTS ===== */
function boost2x(){
  if(now()<b2xCd) return;
  b2xUntil=now()+B2X_TIME;
  b2xCd=b2xUntil+B2X_CD;
  localStorage.setItem('b2xUntil',b2xUntil);
  localStorage.setItem('b2xCd',b2xCd);
}
function autoTap(){
  if(now()<autoCd) return;
  autoUntil=now()+AUTO_TIME;
  autoCd=autoUntil+AUTO_CD;
  localStorage.setItem('autoUntil',autoUntil);
  localStorage.setItem('autoCd',autoCd);
}

/* ===== NAV ===== */
function show(id,btn){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.menu button').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}
</script>

</body>
</html>
