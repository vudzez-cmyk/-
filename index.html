<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>MINES</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>

  <style>
    body {
      margin: 0;
      background: radial-gradient(ellipse at top, #0c1426 0%, #060912 70%);
      font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif;
      color: #fff;
    }

    .screen {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      position: relative;
    }

    /* LANG */
    .lang {
      position: absolute;
      top: 14px;
      right: 14px;
      font-size: 14px;
      cursor: pointer;
      opacity: .8;
    }
    .lang span {
      margin: 0 6px;
      cursor: pointer;
    }
    .lang .active {
      font-weight: 700;
      opacity: 1;
    }

    /* LOADING */
    .title {
      font-size: 34px;
      font-weight: 800;
      letter-spacing: 4px;
      color: #f5c451;
      animation: pulse 1.4s infinite;
    }

    @keyframes pulse {
      0% { opacity: .4 }
      50% { opacity: 1 }
      100% { opacity: .4 }
    }

    /* INPUT */
    .input {
      width: 260px;
      height: 48px;
      border-radius: 12px;
      border: none;
      padding: 0 14px;
      font-size: 16px;
      margin-top: 20px;
      text-align: center;
    }

    .error {
      margin-top: 12px;
      color: #ff6b6b;
      font-size: 14px;
    }

    /* BOARD */
    .board {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin-top: 30px;
    }

    .cell {
      width: 52px;
      height: 52px;
      border-radius: 10px;
      background: linear-gradient(180deg, #1a233d, #0e1324);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05);
    }

    .star {
      font-size: 26px;
      color: #f5c451;
      animation: pop .25s ease forwards;
      text-shadow: 0 0 12px rgba(245,196,81,.9);
    }

    @keyframes pop {
      from { transform: scale(0); }
      to { transform: scale(1); }
    }

    button {
      margin-top: 26px;
      width: 260px;
      height: 48px;
      border-radius: 12px;
      border: none;
      background: #f5c451;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
    }

    button:disabled {
      opacity: .6;
      cursor: default;
    }
  </style>
</head>

<body>
<div id="app"></div>

<script>
  const { useState, useEffect } = React;

  const TEXT = {
    ru: {
      enterId: 'Введите ID 1win',
      idPlaceholder: 'ID',
      idError: 'Введите ID (только цифры)',
      continue: 'Продолжить',
      signal: 'Получить сигнал',
      loading: 'Загрузка…'
    },
    en: {
      enterId: 'Enter 1win ID',
      idPlaceholder: 'ID',
      idError: 'Enter ID (numbers only)',
      continue: 'Continue',
      signal: 'Get signal',
      loading: 'Loading…'
    }
  };

  function App() {
    const [lang, setLang] = useState('ru');
    const [screen, setScreen] = useState('loading');
    const [id, setId] = useState('');
    const [error, setError] = useState('');
    const [stars, setStars] = useState([]);
    const [locked, setLocked] = useState(false);

    const t = TEXT[lang];

    useEffect(() => {
      setTimeout(() => setScreen('id'), 2000);
    }, []);

    function submitId() {
      if (!/^[0-9]+$/.test(id)) {
        setError(t.idError);
        return;
      }
      setError('');
      setScreen('game');
    }

    function getSignal() {
      if (locked) return;
      setLocked(true);
      setStars([]);

      const picks = [];
      while (picks.length < 5) {
        const r = Math.floor(Math.random() * 25);
        if (!picks.includes(r)) picks.push(r);
      }

      picks.forEach((idx, i) => {
        setTimeout(() => {
          setStars(prev => [...prev, idx]);
          if (i === picks.length - 1) setLocked(false);
        }, i * 400);
      });
    }

    return (
      React.createElement('div', { className: 'screen' },

        React.createElement('div', { className: 'lang' },
          React.createElement('span', {
            className: lang === 'ru' ? 'active' : '',
            onClick: () => setLang('ru')
          }, 'RU'),
          '|',
          React.createElement('span', {
            className: lang === 'en' ? 'active' : '',
            onClick: () => setLang('en')
          }, 'EN')
        ),

        screen === 'loading' && React.createElement('div', { className: 'title' }, 'MINES'),

        screen === 'id' && React.createElement(React.Fragment, null,
          React.createElement('div', null, t.enterId),
          React.createElement('input', {
            className: 'input',
            value: id,
            onChange: e => setId(e.target.value),
            placeholder: t.idPlaceholder,
            maxLength: 12
          }),
          error && React.createElement('div', { className: 'error' }, error),
          React.createElement('button', { onClick: submitId }, t.continue)
        ),

        screen === 'game' && React.createElement(React.Fragment, null,
          React.createElement('div', { className: 'board' },
            Array.from({ length: 25 }).map((_, i) =>
              React.createElement('div', { key: i, className: 'cell' },
                stars.includes(i) && React.createElement('div', { className: 'star' }, '★')
              )
            )
          ),
          React.createElement('button', {
            onClick: getSignal,
            disabled: locked
          }, locked ? t.loading : t.signal)
        )
      )
    );
  }

  ReactDOM.render(
    React.createElement(App),
    document.getElementById('app')
  );
</script>
</body>
</html>
